<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>KlanApp - Yeni Nesil Topluluk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Leaflet Harita CSS (ileride harita iÃ§in gerek) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    :root {
      --blue: #32a1f5;
      --red: #ff5a5a;
      --yellow: #ffd237;
      --purple: #b180ea;
      --gray: #23242e;
      --bg: #191b21;
      --text: #f2f2ff;
    }
    html, body {margin:0;padding:0;background:var(--bg);color:var(--text);font-family:'Segoe UI',Arial,sans-serif;}
    * {box-sizing:border-box;}
    #app {max-width:500px;margin:0 auto;min-height:100vh;box-shadow:0 0 32px #0008;}
    /* GiriÅŸ ekranÄ± */
    .giris-kap {display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;background:var(--bg);}
    .giris-logo {font-size:2.9rem;margin-bottom:19px;font-weight:700;letter-spacing:0.09em;}
    .giris-title {font-size:1.35rem;margin-bottom:22px;}
    .giris-form {display:flex;flex-direction:column;align-items:center;width:100%;}
    .giris-form input {padding:14px 16px;border-radius:18px;font-size:1.14rem;margin-bottom:18px;border:none;outline:none;background:#252635;color:#fff;width:220px;box-shadow:0 2px 16px #0002;}
    .giris-form button {background:linear-gradient(90deg,#32a1f5 30%,#b180ea 90%);color:#fff;font-weight:700;font-size:1.18rem;padding:12px 49px;border-radius:26px;border:none;box-shadow:0 2px 24px #0002;cursor:pointer;transition:background .2s;}
    .giris-form button:hover {background:linear-gradient(90deg,#4eb6ff 10%,#c8a5f6 90%);}
    /* Klan seÃ§imi ekranÄ± */
    .klan-secim-kap {display:none;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;}
    .klan-secim-title {font-size:1.23rem;margin-bottom:22px;font-weight:600;}
    .klan-list {display:flex;flex-wrap:wrap;gap:21px;justify-content:center;}
    .klan-card {
      background:#252635; border-radius:19px;box-shadow:0 1px 17px #0003;
      width:110px; min-height:170px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:transform .18s,box-shadow .18s;
      border:3px solid transparent; position:relative;
    }
    .klan-card.selected {transform:scale(1.09);box-shadow:0 6px 24px #0006;border:3px solid #fff6;}
    .klan-blue {color:var(--blue);}
    .klan-red {color:var(--red);}
    .klan-yellow {color:var(--yellow);}
    .klan-purple {color:var(--purple);}
    .klan-logo {font-size:2.7rem;}
    .klan-name {font-size:1.07rem;font-weight:700;margin:7px 0 4px 0;}
    .klan-desc {font-size:.95rem;opacity:.7;}
    .klan-secim-btn {margin-top:38px;font-size:1.13rem;padding:13px 44px;background:linear-gradient(90deg,#32a1f5,#b180ea 80%);color:#fff;border:none;border-radius:27px;box-shadow:0 2px 14px #0002;font-weight:700;cursor:pointer;}
    .klan-secim-btn:disabled {background:#555;opacity:.7;cursor:not-allowed;}
    @media (max-width:700px){
      #app{max-width:100vw;box-shadow:none;}
      .klan-list{gap:13px;}
      .klan-card{width:45vw;min-width:110px;max-width:170px;}
    }
    /* Uygulama genel temasÄ± (klan rengine gÃ¶re dinamik) */
    body[data-theme="blue"] {--bg:#162031;--gray:#1d2430;--primary:var(--blue);}
    body[data-theme="red"] {--bg:#2a181a;--gray:#291d21;--primary:var(--red);}
    body[data-theme="yellow"] {--bg:#2c2b16;--gray:#2c291b;--primary:var(--yellow);}
    body[data-theme="purple"] {--bg:#25192c;--gray:#251d2c;--primary:var(--purple);}
    /* GeÃ§iÅŸ efekti */
    .fadein {animation:fadein .36s;}
    @keyframes fadein {0%{opacity:0;transform:translateY(30px);}100%{opacity:1;transform:none;}}
  </style>
</head>
<body>
<div id="app">
  <!-- GiriÅŸ -->
  <div id="girisKap" class="giris-kap fadein">
    <div class="giris-logo">ğŸŒŒ KLANAPP</div>
    <div class="giris-title">Sana ait, gerÃ§ek bir topluluk!</div>
    <form class="giris-form" onsubmit="event.preventDefault(); girisYap();">
      <input id="kullaniciAdi" type="text" maxlength="24" autocomplete="off" placeholder="Ä°smini yaz..." required>
      <button type="submit">GiriÅŸ</button>
    </form>
  </div>
  <!-- Klan SeÃ§imi -->
  <div id="klanSecimKap" class="klan-secim-kap fadein">
    <div class="klan-secim-title">KlanÄ±nÄ± SeÃ§</div>
    <div class="klan-list" id="klanList">
      <!-- Klanlar JS ile Ã¼retilecek -->
    </div>
    <button id="klanSecBtn" class="klan-secim-btn" disabled>KlanÄ± SeÃ§</button>
  </div>
  <!-- (BURAYA 2. ve 3. kodun mainApp'i gelecek) -->
</div>
<script>
/* --- Klanlar verisi --- */
const KLANS = [
  {id:"blue",   name:"Mavi Klan",    desc:"Strateji & Liderlik", logo:"ğŸ¦…",   color:"#32a1f5"},
  {id:"red",    name:"KÄ±rmÄ±zÄ± Klan", desc:"Cesaret & Enerji",    logo:"ğŸ”¥",   color:"#ff5a5a"},
  {id:"yellow", name:"SarÄ± Klan",    desc:"Sosyallik & ParlaklÄ±k",logo:"ğŸŒŸ",  color:"#ffd237"},
  {id:"purple", name:"Mor Klan",     desc:"Hayal GÃ¼cÃ¼ & YaratÄ±cÄ±lÄ±k",logo:"ğŸ¦„",color:"#b180ea"}
];
let kullanici = {isim:"", klan:null};
let seciliKlan = null;
/* --- GiriÅŸten Klan seÃ§imine geÃ§iÅŸ --- */
function girisYap() {
  let isim = document.getElementById('kullaniciAdi').value.trim();
  if(!isim){alert("Ä°sminizi girin.");return;}
  kullanici.isim = isim;
  document.getElementById('girisKap').style.display="none";
  document.getElementById('klanSecimKap').style.display="flex";
  window.scrollTo(0,0);
  if(document.getElementById('klanList').children.length===0) klanlariYukle();
}
function klanlariYukle() {
  let list = document.getElementById('klanList');
  list.innerHTML = "";
  KLANS.forEach(k=>{
    let div = document.createElement('div');
    div.className = "klan-card klan-"+k.id;
    div.innerHTML = `<div class="klan-logo">${k.logo}</div>
      <div class="klan-name">${k.name}</div>
      <div class="klan-desc">${k.desc}</div>`;
    div.onclick = function() {
      document.querySelectorAll('.klan-card').forEach(card=>card.classList.remove('selected'));
      div.classList.add('selected');
      seciliKlan = k.id;
      document.getElementById('klanSecBtn').disabled = false;
    };
    list.appendChild(div);
  });
}
/* --- Klan seÃ§ildiÄŸinde tema deÄŸiÅŸtir, uygulamaya geÃ§ --- */
document.getElementById('klanSecBtn').onclick = function() {
  if(!seciliKlan) return;
  kullanici.klan = seciliKlan;
  // Tema gÃ¼ncelle
  document.body.setAttribute("data-theme", seciliKlan);
  document.getElementById('klanSecimKap').style.display = "none";
  // Burada devamÄ±nda ana uygulama ekranÄ± aÃ§Ä±lacak (2. kÄ±sÄ±mda)
  // openMainApp(); // 2. kodda ekleyeceksin!
}
</script>
</body>
</html>
<!-- ANA UYGULAMA EKRANI -->
<div id="mainApp" style="display:none;">
  <!-- Jeton bakiyesi saÄŸ Ã¼st -->
  <div id="jetonBox" style="position:absolute;right:22px;top:18px;z-index:11;background:linear-gradient(90deg,#ffd237,#fff6);color:#222;border-radius:20px;padding:6px 18px 6px 11px;font-weight:700;box-shadow:0 2px 18px #0002;display:flex;align-items:center;gap:6px;">
    <span style="font-size:21px;">ğŸª™</span><span id="jetonSayisi">850</span>
  </div>
  <!-- Alt MenÃ¼ BarÄ± -->
  <div id="mainMenu" style="position:fixed;bottom:0;left:0;width:100vw;z-index:21;display:flex;justify-content:space-around;align-items:center;background:var(--gray);padding:0;height:65px;box-shadow:0 -2px 24px #0005;">
    <button class="menu-btn active" data-tab="map"><span class="menu-ikon">ğŸ—ºï¸</span><div>Harita</div></button>
    <button class="menu-btn" data-tab="store"><span class="menu-ikon">ğŸª</span><div>MaÄŸaza</div></button>
    <button class="menu-btn" data-tab="fire"><span class="menu-ikon">ğŸ”¥</span><div>Klan AteÅŸi</div></button>
    <button class="menu-btn" data-tab="profile"><span class="menu-ikon">ğŸ‘¤</span><div>Profil</div></button>
    <button class="menu-btn" data-tab="flag"><span class="menu-ikon">ğŸš©</span><div>Bayrak</div></button>
    <button class="menu-btn" data-tab="qr"><span class="menu-ikon">ğŸ”³</span><div>QR</div></button>
    <button class="menu-btn" data-tab="ref"><span class="menu-ikon">ğŸ</span><div>Davet</div></button>
  </div>
  <!-- Ä°Ã§erik Panelleri -->
  <div id="icerikKap" style="padding-bottom:75px;">
    <!-- 1. Harita TabÄ± -->
    <div id="tab-map" class="main-tab fadein">
      <div id="haritaBox" style="width:100vw;max-width:500px;height:64vh;border-radius:0 0 24px 24px;box-shadow:0 1px 14px #0006;overflow:hidden;margin:0 auto;position:relative;">
        <div id="harita"></div>
        <!-- Sol alt klan kutusu -->
        <div id="klanPanel" style="position:absolute;left:14px;bottom:14px;z-index:10;">
          <div id="klanInfoBtn" style="background:var(--gray);border-radius:16px 21px 18px 15px;padding:9px 16px;display:flex;align-items:center;gap:9px;box-shadow:0 2px 10px #0003;cursor:pointer;">
            <span id="klanLogo" style="font-size:25px;"></span>
            <span id="klanName" style="font-size:1.03rem;font-weight:700;"></span>
          </div>
          <!-- Popup -->
          <div id="klanPopup" style="display:none;position:absolute;bottom:55px;left:0;z-index:100;background:#24283ab8;padding:13px 15px 13px 13px;border-radius:15px 19px 16px 14px;min-width:172px;box-shadow:0 2px 20px #0007;font-size:0.98rem;">
            <div style="font-size:1.06rem;font-weight:700;margin-bottom:8px;" id="klanPopupTitle"></div>
            <div>ğŸŒŸ Puan: <span id="klanPuan">3120</span></div>
            <div>ğŸš© Bayrak: <span id="klanBayrak">6</span></div>
            <div>ğŸ‘¥ Ãœye: <span id="klanUye">310</span></div>
            <div style="margin:8px 0 0 0;"><button id="tumKlanlarBtn" style="padding:4px 13px;border-radius:11px;background:var(--primary);color:#fff;font-weight:600;border:none;cursor:pointer;">TÃ¼m Klanlar</button></div>
          </div>
          <!-- TÃ¼m Klanlar popup -->
          <div id="tumKlanlarPopup" style="display:none;position:absolute;bottom:150px;left:0;z-index:110;background:#191c2be6;padding:12px 9px 11px 13px;border-radius:14px 16px 13px 14px;min-width:185px;box-shadow:0 2px 34px #0008;">
            <div style="font-size:1.02rem;font-weight:700;margin-bottom:7px;">ğŸ† TÃ¼m Klanlar</div>
            <div id="tumKlanlarList"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- DiÄŸer sekmeler (3. kodda doldurulacak) -->
    <div id="tab-store" class="main-tab fadein" style="display:none;text-align:center;padding:38px 0 0 0;">
      <h2>MaÄŸaza</h2>
      <div style="opacity:.7;">(MaÄŸaza iÃ§eriÄŸi 3. kÄ±sÄ±mda gelecek)</div>
    </div>
    <div id="tab-fire" class="main-tab fadein" style="display:none;text-align:center;padding:38px 0 0 0;">
      <h2>Klan AteÅŸi</h2>
      <div style="opacity:.7;">(AteÅŸ ekranÄ± 3. kÄ±sÄ±mda gelecek)</div>
    </div>
    <div id="tab-profile" class="main-tab fadein" style="display:none;text-align:center;padding:38px 0 0 0;">
      <h2>Profil</h2>
      <div style="opacity:.7;">(Profil ekranÄ± 3. kÄ±sÄ±mda gelecek)</div>
    </div>
    <div id="tab-flag" class="main-tab fadein" style="display:none;text-align:center;padding:38px 0 0 0;">
      <h2>Bayrak Dik</h2>
      <div style="opacity:.7;">(Bayrak dikme 3. kÄ±sÄ±mda gelecek)</div>
    </div>
    <div id="tab-qr" class="main-tab fadein" style="display:none;text-align:center;padding:38px 0 0 0;">
      <h2>QR</h2>
      <div style="opacity:.7;">(QR ve referans 3. kÄ±sÄ±mda gelecek)</div>
    </div>
    <div id="tab-ref" class="main-tab fadein" style="display:none;text-align:center;padding:38px 0 0 0;">
      <h2>Davet</h2>
      <div style="opacity:.7;">(Davet sistemi 3. kÄ±sÄ±mda gelecek)</div>
    </div>
  </div>
</div>

<style>
  .main-tab{min-height:66vh;}
  .menu-btn{
    flex:1 1 0;padding:8px 0 4px 0;font-size:1.05rem;color:#fff;background:none;border:none;cursor:pointer;display:flex;flex-direction:column;align-items:center;border-bottom:3px solid transparent;transition:border .2s;font-weight:600;
  }
  .menu-btn.active,.menu-btn:hover{border-bottom:3px solid var(--primary);}
  .menu-ikon{font-size:23px;margin-bottom:1px;}
  @media (max-width:700px){
    #mainMenu{height:61px;}
    #icerikKap{padding-bottom:66px;}
    #haritaBox{height:55vh;}
  }
</style>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
/* 1. kÄ±sÄ±mda seÃ§ilen klan ve kullanÄ±cÄ± bilgisini varsayalÄ±m: */
if(typeof kullanici === "undefined"){var kullanici = {isim:"", klan:null};}
if(typeof KLANS === "undefined"){var KLANS = [
  {id:"blue",   name:"Mavi Klan",    desc:"Strateji & Liderlik", logo:"ğŸ¦…",   color:"#32a1f5"},
  {id:"red",    name:"KÄ±rmÄ±zÄ± Klan", desc:"Cesaret & Enerji",    logo:"ğŸ”¥",   color:"#ff5a5a"},
  {id:"yellow", name:"SarÄ± Klan",    desc:"Sosyallik & ParlaklÄ±k",logo:"ğŸŒŸ",  color:"#ffd237"},
  {id:"purple", name:"Mor Klan",     desc:"Hayal GÃ¼cÃ¼ & YaratÄ±cÄ±lÄ±k",logo:"ğŸ¦„",color:"#b180ea"}
];}
let seciliKlanObj = null;
/* --- Klan seÃ§ilince mainApp aÃ§Ä±lÄ±r (1. kÄ±sÄ±mda): --- */
function openMainApp(){
  document.getElementById('mainApp').style.display="block";
  document.body.scrollTop=0;document.documentElement.scrollTop=0;
  seciliKlanObj = KLANS.find(k=>k.id===kullanici.klan);
  // Panel ikon ve isim
  document.getElementById('klanLogo').innerText = seciliKlanObj.logo;
  document.getElementById('klanName').innerText = seciliKlanObj.name;
  document.getElementById('klanPopupTitle').innerHTML = seciliKlanObj.logo+" "+seciliKlanObj.name;
  // Tema
  document.body.setAttribute("data-theme", seciliKlanObj.id);
  // Dummy verilerle istatistikleri gÃ¼ncelle
  guncelleKlanPopup();
  guncelleTumKlanlar();
  // Harita baÅŸlat
  setTimeout(haritaInit,150);
}
/* Klan kutusu aÃ§/kapa */
document.addEventListener('click',function(e){
  if(e.target.closest('#klanInfoBtn')){document.getElementById('klanPopup').style.display="block";}
  else if(!e.target.closest('#klanPopup')){document.getElementById('klanPopup').style.display="none";}
  if(e.target.closest('#tumKlanlarBtn')){document.getElementById('tumKlanlarPopup').style.display="block";}
  else if(!e.target.closest('#tumKlanlarPopup')){document.getElementById('tumKlanlarPopup').style.display="none";}
});
/* MenÃ¼ geÃ§iÅŸleri */
document.addEventListener('DOMContentLoaded',function(){
  document.querySelectorAll('.menu-btn').forEach(btn=>{
    btn.onclick = function(){
      document.querySelectorAll('.menu-btn').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      let tab = btn.dataset.tab;
      document.querySelectorAll('.main-tab').forEach(t=>t.style.display="none");
      document.getElementById('tab-'+tab).style.display="block";
      if(tab==="map" && window.haritaMap) setTimeout(()=>window.haritaMap.invalidateSize(),100);
    };
  });
});
/* Klan ve TÃ¼m Klanlar verileri */
const KLANS_STATS = [
  {name:"Mavi Klan",logo:"ğŸ¦…",color:"#32a1f5",puan:3120, bayrak:6, uye:310},
  {name:"KÄ±rmÄ±zÄ± Klan",logo:"ğŸ”¥",color:"#ff5a5a",puan:2850, bayrak:8, uye:280},
  {name:"SarÄ± Klan",logo:"ğŸŒŸ",color:"#ffd237",puan:4100, bayrak:13, uye:370},
  {name:"Mor Klan",logo:"ğŸ¦„",color:"#b180ea",puan:3590, bayrak:11, uye:330}
];
function guncelleKlanPopup(){
  let k = KLANS_STATS.find(kk=>kk.name===seciliKlanObj.name);
  document.getElementById('klanPuan').innerText = k.puan;
  document.getElementById('klanBayrak').innerText = k.bayrak;
  document.getElementById('klanUye').innerText = k.uye;
}
function guncelleTumKlanlar(){
  let html = "";
  KLANS_STATS.sort((a,b)=>b.puan-a.puan).forEach((k,i)=>{
    html += `<div style="display:flex;align-items:center;gap:7px;font-weight:600;margin:6px 0;">
      <span style="font-size:19px;">${k.logo}</span>
      <span style="color:${k.color};width:77px;">${k.name}</span>
      <span>ğŸŒŸ ${k.puan}</span> <span>ğŸš©${k.bayrak}</span> <span>ğŸ‘¥${k.uye}</span>
    </div>`;
  });
  document.getElementById('tumKlanlarList').innerHTML = html;
}
/* Harita Ã¶rneÄŸi */
function haritaInit(){
  if(window.haritaMap) {window.haritaMap.invalidateSize(); return;}
  window.haritaMap = L.map('harita').setView([39,34], 6);
  L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',{
    maxZoom:18,attribution:'&copy; <a href="https://carto.com/">CartoDB</a>'
  }).addTo(window.haritaMap);
  // Dummy marker: Klan Ã¼yeleri/alanlar
  let markers = [
    {lat:41.02,lng:29.02,text:"ğŸ¦… 5 Mavi Klan Ã¼yesi burada!"},
    {lat:40.72,lng:30.41,text:"ğŸŒŸ 3 SarÄ± Klan Ã¼yesi burada!"},
    {lat:38.43,lng:27.15,text:"ğŸ¦„ Mor Klan alanÄ±"},
    {lat:39.92,lng:32.85,text:"ğŸ”¥ 2 KÄ±rmÄ±zÄ± Klan Ã¼yesi burada!"}
  ];
  markers.forEach(m=>{
    let mark = L.marker([m.lat,m.lng]).addTo(window.haritaMap);
    mark.bindPopup(m.text);
  });
}
</script>
<!-- MaÄŸaza TabÄ± Ä°Ã§eriÄŸi -->
<script>
// MaÄŸaza iÃ§in demo Ã¼rÃ¼nler
const MAGAZA_URUNLER = [
  {isim:"Ã‡Ä±rak Bileklik",fiyat:150,symbol:"â¬›"},
  {isim:"Usta Bileklik",fiyat:220,symbol:"ğŸ¦…"},
  {isim:"XP Paketi",fiyat:60,symbol:"âš¡"},
  {isim:"Klan Rozeti",fiyat:120,symbol:"ğŸ…"},
  {isim:"RÃ¼tbe YÃ¼kseltici",fiyat:330,symbol:"ğŸ–ï¸"}
];
function urunleriYukle(){
  let m = document.getElementById('tab-store');
  let html = `<h2>MaÄŸaza</h2>
  <div id="magazaUrunler" style="display:flex;flex-wrap:wrap;gap:18px;justify-content:center;margin-top:23px;">`;
  MAGAZA_URUNLER.forEach(u=>{
    html += `<div style="background:var(--gray);border-radius:16px;padding:13px 14px 10px 14px;min-width:130px;max-width:150px;display:flex;flex-direction:column;align-items:center;box-shadow:0 1px 8px #0002;margin-bottom:11px;">
      <div style="font-size:2.1rem;">${u.symbol}</div>
      <div style="font-weight:700;margin:6px 0 5px 0;">${u.isim}</div>
      <div style="color:#ffd237;font-size:1.01rem;">â‚º${u.fiyat}</div>
      <button onclick="alert('Demo: SatÄ±n alma henÃ¼z aktif deÄŸil!')" style="margin-top:6px;background:linear-gradient(90deg,#ffd237,#b180ea 80%);border:none;border-radius:18px;font-weight:700;color:#23222f;padding:6px 15px;cursor:pointer;">SatÄ±n Al</button>
    </div>`;
  });
  html += "</div>";
  m.innerHTML = html;
}

// Klan AteÅŸi demo iÃ§eriÄŸi
function klanAtesiYukle() {
  let f = document.getElementById('tab-fire');
  f.innerHTML = `
    <h2>Klan AteÅŸi</h2>
    <div style="background:rgba(80,0,0,.14);border-radius:15px;padding:17px 0 12px 0;max-width:330px;margin:0 auto 14px auto;">
      <div style="font-size:1.3rem;">ğŸ”¥ KadÄ±kÃ¶y EtkinliÄŸi</div>
      <div style="margin:9px 0;">KatÄ±lÄ±mcÄ±: <b>2 / 7</b></div>
      <button class="fireBtn" onclick="alert('Demo: KatÄ±ldÄ±n!')">KatÄ±l</button>
    </div>
    <button class="fireBtn" onclick="alert('Demo: AteÅŸ Yak!')">AteÅŸ Yak!</button>
  `;
}

// Profil paneli demo iÃ§eriÄŸi
function profilYukle(){
  let p = document.getElementById('tab-profile');
  p.innerHTML = `
    <h2>Profil</h2>
    <div style="display:flex;align-items:center;gap:15px;margin-bottom:13px;">
      <div style="font-size:2.3rem;border-radius:30px;background:var(--gray);padding:8px 16px 5px 16px;">ğŸ‘¤</div>
      <div>
        <div style="font-size:1.12rem;font-weight:700;">@${kullanici.isim}</div>
        <div id="profilKlan" style="margin-top:2px;">${seciliKlanObj.logo} ${seciliKlanObj.name}</div>
      </div>
    </div>
    <div style="display:flex;gap:15px;flex-wrap:wrap;margin-bottom:13px;">
      <div class="profilCard"><b>Seviye:</b> 8</div>
      <div class="profilCard"><b>RÃ¼tbe:</b> Ã–ncÃ¼</div>
      <div class="profilCard"><b>Puan:</b> 660</div>
      <div class="profilCard"><b>ArkadaÅŸ:</b> 5</div>
      <div class="profilCard"><b>Referans:</b> KLAN-${kullanici.isim.toUpperCase()}</div>
    </div>
    <button onclick="alert('Demo: GÃ¶revler aÃ§Ä±lacak!')" class="fireBtn" style="margin-bottom:17px;">GÃ¶revler & RÃ¼tbe Paneli</button>
    <button onclick="alert('Demo: ArkadaÅŸlar aÃ§Ä±lacak!')" class="fireBtn">ArkadaÅŸlar</button>
  `;
}

// Bayrak dikme paneli demo
function bayrakPanelYukle(){
  let b = document.getElementById('tab-flag');
  b.innerHTML = `
    <h2>Bayrak Dik</h2>
    <div style="margin-bottom:13px;">Åu anki konuma bayrak dikmek ister misin?</div>
    <button class="fireBtn" onclick="alert('Demo: Bayrak dikildi!')">Bayrak Dik!</button>
    <div style="margin-top:22px;"><b>BÃ¶lgedeki bayraklar:</b></div>
    <ul style="margin-top:6px;text-align:left;display:inline-block;">
      <li>Mor Klan: 2</li>
      <li>Mavi Klan: 1</li>
      <li>KÄ±rmÄ±zÄ± Klan: 1</li>
    </ul>
  `;
}

// QR ve Davet paneli demo
function qrPanelYukle(){
  let q = document.getElementById('tab-qr');
  q.innerHTML = `
    <h2>QR Kod</h2>
    <div>ArkadaÅŸ eklemek iÃ§in QR kodunu gÃ¶ster!</div>
    <img src="https://api.qrserver.com/v1/create-qr-code/?data=KlanApp-${kullanici.isim}&size=110x110" style="margin:23px auto;border-radius:13px;display:block;">
    <button class="fireBtn" onclick="alert('Demo: QR Tara!')">QR Tara</button>
  `;
}
function davetPanelYukle(){
  let r = document.getElementById('tab-ref');
  r.innerHTML = `
    <h2>Davet & Referans</h2>
    <div>Referans Kodun: <span style="font-weight:700;">KLAN-${kullanici.isim.toUpperCase()}</span></div>
    <button class="fireBtn" onclick="navigator.clipboard.writeText('KLAN-${kullanici.isim.toUpperCase()}');alert('Kod kopyalandÄ±!')">Kopyala</button>
    <div style="margin-top:9px;font-size:.96rem;opacity:.7;">Her davet iÃ§in <b>+50 jeton</b> kazanÄ±rsÄ±n!</div>
  `;
}

/* MenÃ¼ geÃ§iÅŸlerinde panel iÃ§erikleri yÃ¼kle */
function tablariYukle() {
  urunleriYukle();
  klanAtesiYukle();
  profilYukle();
  bayrakPanelYukle();
  qrPanelYukle();
  davetPanelYukle();
}

/* 2. kodun openMainApp fonksiyonuna EKLE: */
let mainAppYuklu = false;
let eskiOpenMainApp = openMainApp;
openMainApp = function() {
  eskiOpenMainApp();
  if(!mainAppYuklu) {
    tablariYukle();
    mainAppYuklu = true;
  }
};

</script>
<style>
.fireBtn{background:linear-gradient(90deg,var(--primary) 55%,#ffd237 90%);color:#23222f;font-weight:700;font-size:1.05rem;padding:8px 22px;border-radius:19px;border:none;margin:5px 3px;box-shadow:0 2px 10px #0002;cursor:pointer;}
.fireBtn:hover{background:linear-gradient(90deg,#ffd237 20%,var(--primary) 80%);}
.profilCard{background:var(--gray);padding:8px 18px;border-radius:13px;margin-bottom:5px;font-size:1rem;}
</style>
