<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Klan UygulamasÄ±</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    :root {
      --blue: #37a1f7;
      --red: #ff5757;
      --yellow: #ffd237;
      --purple: #b180ea;
      --bg: #171b20;
      --box: #23242e;
      --white: #fff;
      --maxwidth: 460px;
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      background: var(--bg);
      color: var(--white);
      font-family: 'Segoe UI', Arial, sans-serif;
      width: 100vw;
      min-height: 100vh;
      overflow: hidden;
    }
    #app {
      min-height: 100vh;
      width: 100vw;
      max-width: var(--maxwidth);
      margin: 0 auto;
      background: var(--bg);
      display: flex;
      flex-direction: column;
      position: relative;
      box-shadow: 0 0 18px #0003;
    }
    /* Klan SeÃ§imi */
    #klanSec {
      width:100vw;
      min-height:100vh;
      background: var(--bg);
      position: absolute;
      top:0; left:0; z-index:10;
      display: flex; flex-direction: column; justify-content:center; align-items:center;
      padding-bottom: 20vw;
    }
    .klanlar {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 16px;
      margin-top: 18px;
      width: 95vw;
      max-width: 400px;
    }
    .klan {
      flex: 1 1 120px;
      min-width: 96px;
      max-width: 140px;
      background: var(--box);
      border-radius: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 18px 0 10px 0;
      cursor: pointer;
      border: 2px solid transparent;
      box-shadow:0 2px 12px #0003;
      transition: box-shadow .2s, border .2s;
    }
    .klan.selected, .klan:hover {
      box-shadow: 0 0 0 4px #fff5;
      border: 2px solid var(--purple);
    }
    .klan-blue { color: var(--blue);}
    .klan-red { color: var(--red);}
    .klan-yellow { color: var(--yellow);}
    .klan-purple { color: var(--purple);}
    .klan-symbol { font-size: 34px; }
    .klan-name { font-size: 1.09rem; font-weight: 700; margin-top: 6px;}
    .klan-desc { font-size: .97rem; opacity: .75;}
    .katil-btn {
      margin: 30px auto 0 auto;
      padding: 12px 44px;
      border: none;
      border-radius: 20px;
      font-size: 1.08rem;
      font-weight: 700;
      color: #191b21;
      background: linear-gradient(90deg, var(--blue), var(--purple));
      cursor: pointer;
      box-shadow: 0 2px 12px #0002;
      display: block;
      letter-spacing:.03em;
    }
    .katil-btn:disabled { background: #444; opacity: .65; cursor: not-allowed;}
    /* MenÃ¼ */
    #menu {
      width: 100vw; max-width:var(--maxwidth);
      background: var(--box);
      display: flex;
      justify-content: space-around;
      align-items: center;
      height: 54px;
      border-top: 1px solid #202124;
      position: fixed;
      bottom: 0; left: 50%; transform:translateX(-50%);
      z-index: 30;
    }
    .menu-btn {
      flex: 1 1 0;
      font-size: .98rem;
      color: #fff;
      background: none;
      border: none;
      padding: 0;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-bottom: 3px solid transparent;
      transition: border .2s;
      cursor: pointer;
    }
    .menu-btn.active, .menu-btn:hover {
      border-bottom: 3px solid var(--purple);
      color: var(--purple);
    }
    .menu-icon { font-size: 21px; margin-bottom: 2px;}
    /* Ä°Ã§erik */
    #icerik {
      flex: 1 1 auto;
      min-height: 0;
      background: var(--bg);
      position: relative;
      margin-bottom: 54px;
      overflow-y: auto;
      height: calc(100vh - 54px);
      max-width: var(--maxwidth);
    }
    /* Harita */
    #map {
      width: 100vw; max-width:var(--maxwidth);
      height: 42vw;
      min-height: 180px;
      max-height: 310px;
      z-index: 2;
      border-radius: 0 0 14px 14px;
      box-shadow: 0 8px 18px #0002;
    }
    /* Sol alt butonlar */
    .solalt-klanbox{
      position: absolute;
      left: 10px; bottom: 17vw;
      z-index: 20;
      display: flex; flex-direction: column; align-items: flex-start;
      gap: 8px;
    }
    .klaninfo-btn{
      display:flex;align-items:center;gap:7px;
      background:var(--box);color:#fff;border-radius:11px;
      padding:9px 16px;cursor:pointer;box-shadow:0 1px 4px #0002;
      font-weight: 600; border: 2px solid #fff1; min-width: 92px;
      font-size: 1rem;
    }
    .klaninfo-symbol{font-size:20px;}
    .klaninfo-popup{
      display:none;position:absolute;bottom:40px;left:0;z-index:99;
      background:#262730ec;padding:11px 13px 10px 13px;border-radius:10px;
      min-width:120px;box-shadow:0 2px 10px #0007;font-size:.98rem;
    }
    .klaninfo-popup.active{display:block;}
    .tumklanlar-btn{
      width:31px;height:31px;display:flex;align-items:center;justify-content:center;
      background:var(--blue);color:#fff;border-radius:8px;cursor:pointer;box-shadow:0 1px 5px #0002;font-size:17px;}
    .tumklanlar-popup{
      display:none;position:absolute;bottom:72px;left:0;z-index:100;
      background:#23242ad6;padding:9px 10px 8px 10px;border-radius:9px;
      min-width:120px;box-shadow:0 2px 10px #0007;font-size:.97rem;
    }
    .tumklanlar-popup.active{display:block;}
    /* MaÄŸaza */
    .store-wrap{display:flex;flex-wrap:wrap;justify-content:center;gap:9px;}
    .store-product{background:#22252a;border-radius:9px;padding:10px 7px 9px 7px;margin:4px 1px;min-width:92px;flex:1 0 89px;max-width:118px;display:flex;flex-direction:column;align-items:center;}
    .store-symbol{font-size:21px;margin-bottom:2px;}
    .store-name{font-size:.97rem;font-weight:700;}
    .store-price{font-size:.94rem;margin:3px 0 5px 0;color:#ffd237;}
    .store-btn{background:linear-gradient(90deg,#ffd237,#b180ea 60%);border:none;border-radius:7px;font-weight:700;color:#23222f;padding:3px 10px;cursor:pointer;}
    /* Profil */
    .tab-content{padding:11px 2px 2px 2px;text-align:center;}
    .profile-klan{display:flex;align-items:center;margin-bottom:11px;}
    .profile-symbol{font-size:18px;margin-right:5px;}
    .profile-klan-name{font-size:.98rem;font-weight:600;}
    .profile-data{font-size:.91rem;margin:3px 0;display:flex;align-items:center;gap:5px;}
    .prof-ikon{font-size:13px;opacity:.82;}
    @media (min-width:700px){
      #app{max-width:var(--maxwidth);}
      #icerik{max-width:var(--maxwidth);}
      #menu{max-width:var(--maxwidth);}
      #map{max-width:var(--maxwidth);}
    }
    @media (max-width:450px){
      #app, #icerik, #menu, #map { max-width:100vw;}
      .klanlar{max-width:100vw;}
    }
  </style>
</head>
<body>
<div id="app">
  <!-- Klan SeÃ§imi -->
  <div id="klanSec">
    <h2 style="font-size:1.23rem;">KlanÄ±nÄ± SeÃ§</h2>
    <div class="klanlar">
      <div class="klan klan-blue" data-klan="blue">
        <span class="klan-symbol">ğŸ¦…</span>
        <span class="klan-name">Mavi</span>
        <span class="klan-desc">Strateji</span>
      </div>
      <div class="klan klan-red" data-klan="red">
        <span class="klan-symbol">ğŸ”¥</span>
        <span class="klan-name">KÄ±rmÄ±zÄ±</span>
        <span class="klan-desc">Cesaret</span>
      </div>
      <div class="klan klan-yellow" data-klan="yellow">
        <span class="klan-symbol">ğŸŒŸ</span>
        <span class="klan-name">SarÄ±</span>
        <span class="klan-desc">Sosyallik</span>
      </div>
      <div class="klan klan-purple" data-klan="purple">
        <span class="klan-symbol">ğŸ¦„</span>
        <span class="klan-name">Mor</span>
        <span class="klan-desc">YaratÄ±cÄ±lÄ±k</span>
      </div>
    </div>
    <button class="katil-btn" id="katilBtn" disabled>KATIL</button>
  </div>
  <!-- Ana UI -->
  <div id="oyunui" style="display:none;height:100vh;width:100vw;position:relative;">
    <div class="solalt-klanbox" id="solaltBox" style="display:none;">
      <div class="tumklanlar-btn" id="tumKlanBtn" title="Klan SÄ±ralamasÄ±">ğŸ†</div>
      <div class="klaninfo-btn" id="klanInfoBtn"><span class="klaninfo-symbol"></span><span class="klaninfo-name"></span></div>
      <div class="klaninfo-popup" id="klanInfoPopup"></div>
      <div class="tumklanlar-popup" id="tumKlanlarPopup"></div>
    </div>
    <div id="icerik">
      <!-- Harita -->
      <div id="map-tab">
        <div id="map"></div>
      </div>
      <!-- MaÄŸaza -->
      <div id="store-tab" class="tab-content" style="display:none;">
        <h3>MaÄŸaza</h3>
        <div class="store-wrap" id="magazaBileklikler"></div>
      </div>
      <!-- Profil -->
      <div id="profile-tab" class="tab-content" style="display:none;">
        <h3>Profil</h3>
        <div class="profile-klan">
          <span class="profile-symbol"></span>
          <span class="profile-klan-name"></span>
        </div>
        <div class="profile-data"><span class="prof-ikon">â­</span>Puan: <span id="puan">9/10</span></div>
        <div class="profile-data"><span class="prof-ikon">ğŸ‘¥</span>ArkadaÅŸ: <span id="arkadas">4</span></div>
        <div class="profile-data"><span class="prof-ikon">âš¡</span>Seviye: <span id="seviye">2</span></div>
        <div class="profile-data"><span class="prof-ikon">ğŸ¥‡</span>RÃ¼tbe: <span id="rutbe">AteÅŸÃ§i</span></div>
      </div>
    </div>
    <div id="menu">
      <button class="menu-btn active" data-tab="map"><span class="menu-icon">ğŸ—ºï¸</span>Harita</button>
      <button class="menu-btn" data-tab="store"><span class="menu-icon">ğŸª</span>MaÄŸaza</button>
      <button class="menu-btn" data-tab="profile"><span class="menu-icon">ğŸ‘¤</span>Profil</button>
    </div>
  </div>
</div>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const klans = {
  blue:   {name:"Mavi",   color:"#37a1f7", symbol:"ğŸ¦…", desc:"Strateji", bileklikler:["Ã‡Ä±rak","Usta","Kartal","Lider"] },
  red:    {name:"KÄ±rmÄ±zÄ±", color:"#ff5757", symbol:"ğŸ”¥", desc:"Cesaret", bileklikler:["Ã‡Ä±rak","Usta","Alev","SavaÅŸÃ§Ä±"] },
  yellow: {name:"SarÄ±",    color:"#ffd237", symbol:"ğŸŒŸ", desc:"Sosyallik", bileklikler:["Ã‡Ä±rak","Usta","YÄ±ldÄ±z","Parlak"] },
  purple: {name:"Mor",   color:"#b180ea", symbol:"ğŸ¦„", desc:"YaratÄ±cÄ±lÄ±k", bileklikler:["Ã‡Ä±rak","Usta","Unicorn","SanatÃ§Ä±"] }
};
const tumKlanlarStats = [
  {rank:1, name:"SarÄ±", symbol:"ğŸŒŸ", color:"#ffd237", puan:7400, bayrak:18, uye:600},
  {rank:2, name:"Mor", symbol:"ğŸ¦„", color:"#b180ea", puan:6890, bayrak:16, uye:570},
  {rank:3, name:"KÄ±rmÄ±zÄ±", symbol:"ğŸ”¥", color:"#ff5757", puan:6550, bayrak:13, uye:540},
  {rank:4, name:"Mavi", symbol:"ğŸ¦…", color:"#37a1f7", puan:6290, bayrak:11, uye:490},
];
let seciliKlan = null;
document.querySelectorAll('.klan').forEach(k=>{
  k.onclick=()=>{
    document.querySelectorAll('.klan').forEach(el=>el.classList.remove('selected'));
    k.classList.add('selected');
    seciliKlan=k.dataset.klan;
    document.getElementById('katilBtn').disabled=false;
  }
});
document.getElementById('katilBtn').onclick=()=>{
  document.getElementById('klanSec').style.display='none';
  document.getElementById('oyunui').style.display='block';
  document.getElementById('solaltBox').style.display = "flex";
  const klan = klans[seciliKlan];
  document.querySelector('.klaninfo-symbol').innerText = klan.symbol;
  document.querySelector('.klaninfo-name').innerText = klan.name;
  document.querySelector('.profile-symbol').innerText = klan.symbol;
  document.querySelector('.profile-klan-name').innerText = klan.name;
  guncelleKlanPopup();
  guncelleTumKlanlar();
  // MaÄŸaza
  const magaza = document.getElementById('magazaBileklikler');
  magaza.innerHTML = '';
  klan.bileklikler.forEach((b,i)=>{
    magaza.innerHTML += `
      <div class="store-product">
        <span class="store-symbol" style="color:${klan.color};">${klan.symbol}</span>
        <span class="store-name">${klan.name} ${b} Bileklik</span>
        <span class="store-price">â‚º${120+30*i}</span>
        <button class="store-btn">SatÄ±n Al</button>
      </div>
    `;
  });
  setTimeout(initMap,80);
}
function guncelleKlanPopup(){
  if(!seciliKlan) return;
  let klan = klans[seciliKlan], stat = tumKlanlarStats.find(k=>k.name==klan.name);
  let info = `<b>${klan.symbol} ${klan.name}</b><br>
    ğŸŒŸ Puan: ${stat?.puan||"--"}<br>
    ğŸš© Bayrak: ${stat?.bayrak||"--"}<br>
    ğŸ‘¥ Ãœye: ${stat?.uye||"--"}`;
  document.getElementById('klanInfoPopup').innerHTML = info;
}
function guncelleTumKlanlar(){
  let html = `<b>ğŸ† Klan SÄ±ralamasÄ±</b><br>`;
  tumKlanlarStats.forEach(k=>{
    html += `<div style="display:flex;align-items:center;gap:4px;margin:2px 0;">
      <span>#${k.rank}</span><span style="color:${k.color}">${k.symbol}</span>
      <span style="color:${k.color};font-weight:600;">${k.name}</span>
      <span style="margin-left:auto;">${k.puan}</span>
      <span>ğŸš©${k.bayrak}</span>
      <span>ğŸ‘¥${k.uye}</span></div>`;
  });
  document.getElementById('tumKlanlarPopup').innerHTML = html;
}
document.body.onclick = function(e){
  if(!e.target.closest('.klaninfo-btn') && !e.target.closest('.klaninfo-popup'))
    document.getElementById('klanInfoPopup').classList.remove('active');
  if(!e.target.closest('.tumklanlar-btn') && !e.target.closest('.tumklanlar-popup'))
    document.getElementById('tumKlanlarPopup').classList.remove('active');
}
document.getElementById('klanInfoBtn').onclick=()=>{
  let pop=document.getElementById('klanInfoPopup');pop.classList.toggle('active');
  document.getElementById('tumKlanlarPopup').classList.remove('active');
}
document.getElementById('tumKlanBtn').onclick=()=>{
  let pop=document.getElementById('tumKlanlarPopup');pop.classList.toggle('active');
  document.getElementById('klanInfoPopup').classList.remove('active');
}
document.querySelectorAll('.menu-btn').forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll('.menu-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    ['map','store','profile'].forEach(tab=>{
      document.getElementById(tab+'-tab').style.display=(btn.dataset.tab==tab)?'block':'none';
    });
    if(btn.dataset.tab==="map" && window.leafletMap) setTimeout(()=>{window.leafletMap.invalidateSize()},80);
  }
});
function initMap(){
  if(window.leafletMap){ window.leafletMap.invalidateSize(); return; }
  window.leafletMap=L.map('map',{zoomControl:false, attributionControl:false}).setView([39,34],6);
  L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',{
    maxZoom:19
  }).addTo(window.leafletMap);
  L.marker([41.02,29.02]).addTo(window.leafletMap).bindPopup('ğŸ¦… <b>Mavi Klan</b> â€“ KadÄ±kÃ¶y');
  L.marker([39.92,32.85]).addTo(window.leafletMap).bindPopup('ğŸ”¥ <b>KÄ±rmÄ±zÄ± Klan</b> â€“ Ankara');
  L.marker([40.72,30.41]).addTo(window.leafletMap).bindPopup('ğŸŒŸ <b>SarÄ± Klan</b> â€“ Sakarya');
  L.marker([38.43,27.15]).addTo(window.leafletMap).bindPopup('ğŸ¦„ <b>Mor Klan</b> â€“ Ä°zmir');
}
</script>
</body>
</html>
